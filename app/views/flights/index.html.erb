<h1>Find a flight!</h1>

<%= form_with model: @flight, data: { turbo: false }, method: :get do |form| %>
  <%= select_tag(:departure_airport_id, options_for_select(@airport_options), {:prompt => "Departing Airport"}) %>
  <%= select_tag(:arrival_airport_id, options_for_select(@airport_options), {:prompt => "Arriving Airport"}) %>
  <%= select_tag(:departure_date, options_for_select(@date_options), {:prompt => "Departure Date"}) %>
  <%= select_tag(:number_of_passengers, options_for_select(@passenger_options), {:prompt => "Passengers"}) %>
  <%= form.submit "Search flights", class: "btn btn-primary" %>
<% end %>

<% if @flights.any? %>
  <%= form_with model: @booking, data: { turbo: false }, url: new_booking_path, method: :get do |form| %>
    <% @flights.each do |flight| %>
      <br>
      From: <%= flight.departure_airport.location %> | 
      To: <%= flight.arrival_airport.location %> | 
      Date: <%= flight.departure_date.strftime("%A, %B %d") %> | 
      Time: <%= flight.departure_time %> | 
      Flight Number : <%= flight.flight_number %> 
      <%= form.hidden_field :number_of_passengers, value: params[:number_of_passengers] %>
      <%= form.radio_button :flight_id, flight.id %>
      <br>
    <% end %>
    <%= form.submit "Select", class: "btn btn-success" %>
  <% end %>
<% else %>
    <p>There are no matching flights!</p>
<% end %>